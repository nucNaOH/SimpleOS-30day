     1 00000000                                 [FORMAT "WCOFF"]
     2 00000000                                 [INSTRSET "i486p"]
     3 00000000                                 [OPTIMIZE 1]
     4 00000000                                 [OPTION 1]
     5 00000000                                 [BITS 32]
     6 00000000                                 	EXTERN	_init_gdtidt
     7 00000000                                 	EXTERN	_init_pic
     8 00000000                                 	EXTERN	_io_sti
     9 00000000                                 	EXTERN	_keyfifo
    10 00000000                                 	EXTERN	_fifo8_init
    11 00000000                                 	EXTERN	_mousefifo
    12 00000000                                 	EXTERN	_init_pit
    13 00000000                                 	EXTERN	_io_out8
    14 00000000                                 	EXTERN	_timer_alloc
    15 00000000                                 	EXTERN	_timer_init
    16 00000000                                 	EXTERN	_timer_settime
    17 00000000                                 	EXTERN	_init_keyboard
    18 00000000                                 	EXTERN	_memtest_sub
    19 00000000                                 	EXTERN	_memman_init
    20 00000000                                 	EXTERN	_memman_free
    21 00000000                                 	EXTERN	_init_palette
    22 00000000                                 	EXTERN	_shtctl_init
    23 00000000                                 	EXTERN	_sheet_alloc
    24 00000000                                 	EXTERN	_memman_alloc_4k
    25 00000000                                 	EXTERN	_sheet_setbuf
    26 00000000                                 	EXTERN	_init_screen8
    27 00000000                                 	EXTERN	_init_mouse_cursor8
    28 00000000                                 	EXTERN	_make_window8
    29 00000000                                 	EXTERN	_sheet_slide
    30 00000000                                 	EXTERN	_sheet_updown
    31 00000000                                 	EXTERN	_putfonts8_asc
    32 00000000                                 	EXTERN	_sprintf
    33 00000000                                 	EXTERN	_memman_total
    34 00000000                                 	EXTERN	_sheet_refresh
    35 00000000                                 	EXTERN	_enable_mouse
    36 00000000                                 	EXTERN	_timerctl
    37 00000000                                 	EXTERN	_boxfill8
    38 00000000                                 	EXTERN	_io_cli
    39 00000000                                 	EXTERN	_fifo8_status
    40 00000000                                 	EXTERN	_fifo8_get
    41 00000000                                 	EXTERN	_mouse_decode
    42 00000000                                 	EXTERN	_io_stihlt
    43 00000000                                 [FILE "bootpack.c"]
    44                                          [SECTION .data]
    45 00000000                                 LC0:
    46 00000000 66 79 74 00                     	DB	"fyt",0x00
    47 00000004                                 LC1:
    48 00000004 66 79 74 2C 20 49 20 6C 6F 76   	DB	"fyt, I love you~",0x00
       0000000E 65 20 79 6F 75 7E 00 
    49 00000015                                 LC2:
    50 00000015 28 25 64 2C 25 64 29 00         	DB	"(%d,%d)",0x00
    51 0000001D                                 LC3:
    52 0000001D 4D 65 6D 6F 72 79 20 25 64 4D   	DB	"Memory %dMB; free: %dKB.",0x00
       00000027 42 3B 20 66 72 65 65 3A 20 25 
       00000031 64 4B 42 2E 00 
    53 00000036                                 LC4:
    54 00000036 25 30 31 30 64 00               	DB	"%010d",0x00
    55 0000003C                                 LC8:
    56 0000003C 35 20 5B 73 65 63 5D 00         	DB	"5 [sec]",0x00
    57 00000044                                 LC6:
    58 00000044 5B 6C 63 72 20 25 34 64 20 25   	DB	"[lcr %4d %4d]",0x00
       0000004E 34 64 5D 00 
    59 00000052                                 LC7:
    60 00000052 28 25 33 64 2C 20 25 33 64 29   	DB	"(%3d, %3d)",0x00
       0000005C 00 
    61 0000005D                                 LC5:
    62 0000005D 25 30 32 78 00                  	DB	"%02x",0x00
    63                                          [SECTION .text]
    64 00000000                                 	GLOBAL	_HariMain
    65 00000000                                 _HariMain:
    66 00000000 55                              	PUSH	EBP
    67 00000001 89 E5                           	MOV	EBP,ESP
    68 00000003 57                              	PUSH	EDI
    69 00000004 56                              	PUSH	ESI
    70 00000005 53                              	PUSH	EBX
    71 00000006 8D 9D FFFFFCF4                  	LEA	EBX,DWORD [-780+EBP]
    72 0000000C 81 EC 00000358                  	SUB	ESP,856
    73 00000012 E8 [00000000]                   	CALL	_init_gdtidt
    74 00000017 E8 [00000000]                   	CALL	_init_pic
    75 0000001C E8 [00000000]                   	CALL	_io_sti
    76 00000021 8D 85 FFFFFEA4                  	LEA	EAX,DWORD [-348+EBP]
    77 00000027 50                              	PUSH	EAX
    78 00000028 6A 20                           	PUSH	32
    79 0000002A 68 [00000000]                   	PUSH	_keyfifo
    80 0000002F E8 [00000000]                   	CALL	_fifo8_init
    81 00000034 8D 85 FFFFFE24                  	LEA	EAX,DWORD [-476+EBP]
    82 0000003A 50                              	PUSH	EAX
    83 0000003B 68 00000080                     	PUSH	128
    84 00000040 68 [00000000]                   	PUSH	_mousefifo
    85 00000045 E8 [00000000]                   	CALL	_fifo8_init
    86 0000004A E8 [00000000]                   	CALL	_init_pit
    87 0000004F 68 000000F8                     	PUSH	248
    88 00000054 6A 21                           	PUSH	33
    89 00000056 E8 [00000000]                   	CALL	_io_out8
    90 0000005B 83 C4 20                        	ADD	ESP,32
    91 0000005E 68 000000EF                     	PUSH	239
    92 00000063 68 000000A1                     	PUSH	161
    93 00000068 E8 [00000000]                   	CALL	_io_out8
    94 0000006D 8D 85 FFFFFCCC                  	LEA	EAX,DWORD [-820+EBP]
    95 00000073 50                              	PUSH	EAX
    96 00000074 6A 08                           	PUSH	8
    97 00000076 53                              	PUSH	EBX
    98 00000077 E8 [00000000]                   	CALL	_fifo8_init
    99 0000007C E8 [00000000]                   	CALL	_timer_alloc
   100 00000081 6A 01                           	PUSH	1
   101 00000083 53                              	PUSH	EBX
   102 00000084 89 C6                           	MOV	ESI,EAX
   103 00000086 50                              	PUSH	EAX
   104 00000087 8D 9D FFFFFCD4                  	LEA	EBX,DWORD [-812+EBP]
   105 0000008D E8 [00000000]                   	CALL	_timer_init
   106 00000092 83 C4 20                        	ADD	ESP,32
   107 00000095 68 000001F4                     	PUSH	500
   108 0000009A 56                              	PUSH	ESI
   109 0000009B E8 [00000000]                   	CALL	_timer_settime
   110 000000A0 8D 85 FFFFFCC4                  	LEA	EAX,DWORD [-828+EBP]
   111 000000A6 50                              	PUSH	EAX
   112 000000A7 6A 08                           	PUSH	8
   113 000000A9 53                              	PUSH	EBX
   114 000000AA E8 [00000000]                   	CALL	_fifo8_init
   115 000000AF E8 [00000000]                   	CALL	_timer_alloc
   116 000000B4 6A 01                           	PUSH	1
   117 000000B6 53                              	PUSH	EBX
   118 000000B7 50                              	PUSH	EAX
   119 000000B8 89 85 FFFFFCA4                  	MOV	DWORD [-860+EBP],EAX
   120 000000BE E8 [00000000]                   	CALL	_timer_init
   121 000000C3 83 C4 20                        	ADD	ESP,32
   122 000000C6 6A 32                           	PUSH	50
   123 000000C8 FF B5 FFFFFCA4                  	PUSH	DWORD [-860+EBP]
   124 000000CE E8 [00000000]                   	CALL	_timer_settime
   125 000000D3 E8 [00000000]                   	CALL	_init_keyboard
   126 000000D8 68 BFFFFFFF                     	PUSH	-1073741825
   127 000000DD 68 00400000                     	PUSH	4194304
   128 000000E2 E8 [00000000]                   	CALL	_memtest_sub
   129 000000E7 68 003C0000                     	PUSH	3932160
   130 000000EC 89 C6                           	MOV	ESI,EAX
   131 000000EE E8 [00000000]                   	CALL	_memman_init
   132 000000F3 68 0009E000                     	PUSH	647168
   133 000000F8 68 00001000                     	PUSH	4096
   134 000000FD 68 003C0000                     	PUSH	3932160
   135 00000102 E8 [00000000]                   	CALL	_memman_free
   136 00000107 8D 86 FFC00000                  	LEA	EAX,DWORD [-4194304+ESI]
   137 0000010D C1 EE 14                        	SHR	ESI,20
   138 00000110 83 C4 20                        	ADD	ESP,32
   139 00000113 50                              	PUSH	EAX
   140 00000114 68 00400000                     	PUSH	4194304
   141 00000119 68 003C0000                     	PUSH	3932160
   142 0000011E E8 [00000000]                   	CALL	_memman_free
   143 00000123 E8 [00000000]                   	CALL	_init_palette
   144 00000128 0F BF 05 00000FF6               	MOVSX	EAX,WORD [4086]
   145 0000012F 50                              	PUSH	EAX
   146 00000130 0F BF 05 00000FF4               	MOVSX	EAX,WORD [4084]
   147 00000137 50                              	PUSH	EAX
   148 00000138 FF 35 00000FF8                  	PUSH	DWORD [4088]
   149 0000013E 68 003C0000                     	PUSH	3932160
   150 00000143 E8 [00000000]                   	CALL	_shtctl_init
   151 00000148 89 C3                           	MOV	EBX,EAX
   152 0000014A 50                              	PUSH	EAX
   153 0000014B E8 [00000000]                   	CALL	_sheet_alloc
   154 00000150 83 C4 20                        	ADD	ESP,32
   155 00000153 53                              	PUSH	EBX
   156 00000154 89 85 FFFFFCB8                  	MOV	DWORD [-840+EBP],EAX
   157 0000015A E8 [00000000]                   	CALL	_sheet_alloc
   158 0000015F 53                              	PUSH	EBX
   159 00000160 8D 9D FFFFFD14                  	LEA	EBX,DWORD [-748+EBP]
   160 00000166 89 85 FFFFFCB4                  	MOV	DWORD [-844+EBP],EAX
   161 0000016C E8 [00000000]                   	CALL	_sheet_alloc
   162 00000171 0F BF 15 00000FF6               	MOVSX	EDX,WORD [4086]
   163 00000178 89 85 FFFFFCB0                  	MOV	DWORD [-848+EBP],EAX
   164 0000017E 0F BF 05 00000FF4               	MOVSX	EAX,WORD [4084]
   165 00000185 0F AF C2                        	IMUL	EAX,EDX
   166 00000188 50                              	PUSH	EAX
   167 00000189 68 003C0000                     	PUSH	3932160
   168 0000018E E8 [00000000]                   	CALL	_memman_alloc_4k
   169 00000193 68 00003200                     	PUSH	12800
   170 00000198 68 003C0000                     	PUSH	3932160
   171 0000019D 89 85 FFFFFCAC                  	MOV	DWORD [-852+EBP],EAX
   172 000001A3 E8 [00000000]                   	CALL	_memman_alloc_4k
   173 000001A8 6A FF                           	PUSH	-1
   174 000001AA 89 85 FFFFFCA8                  	MOV	DWORD [-856+EBP],EAX
   175 000001B0 0F BF 05 00000FF6               	MOVSX	EAX,WORD [4086]
   176 000001B7 50                              	PUSH	EAX
   177 000001B8 0F BF 05 00000FF4               	MOVSX	EAX,WORD [4084]
   178 000001BF 50                              	PUSH	EAX
   179 000001C0 FF B5 FFFFFCAC                  	PUSH	DWORD [-852+EBP]
   180 000001C6 FF B5 FFFFFCB8                  	PUSH	DWORD [-840+EBP]
   181 000001CC E8 [00000000]                   	CALL	_sheet_setbuf
   182 000001D1 83 C4 2C                        	ADD	ESP,44
   183 000001D4 6A 63                           	PUSH	99
   184 000001D6 6A 10                           	PUSH	16
   185 000001D8 6A 10                           	PUSH	16
   186 000001DA 53                              	PUSH	EBX
   187 000001DB FF B5 FFFFFCB4                  	PUSH	DWORD [-844+EBP]
   188 000001E1 E8 [00000000]                   	CALL	_sheet_setbuf
   189 000001E6 6A FF                           	PUSH	-1
   190 000001E8 6A 50                           	PUSH	80
   191 000001EA 68 000000A0                     	PUSH	160
   192 000001EF FF B5 FFFFFCA8                  	PUSH	DWORD [-856+EBP]
   193 000001F5 FF B5 FFFFFCB0                  	PUSH	DWORD [-848+EBP]
   194 000001FB E8 [00000000]                   	CALL	_sheet_setbuf
   195 00000200 83 C4 28                        	ADD	ESP,40
   196 00000203 0F BF 05 00000FF6               	MOVSX	EAX,WORD [4086]
   197 0000020A 50                              	PUSH	EAX
   198 0000020B 0F BF 05 00000FF4               	MOVSX	EAX,WORD [4084]
   199 00000212 50                              	PUSH	EAX
   200 00000213 FF B5 FFFFFCAC                  	PUSH	DWORD [-852+EBP]
   201 00000219 E8 [00000000]                   	CALL	_init_screen8
   202 0000021E 6A 63                           	PUSH	99
   203 00000220 53                              	PUSH	EBX
   204 00000221 BB 00000002                     	MOV	EBX,2
   205 00000226 E8 [00000000]                   	CALL	_init_mouse_cursor8
   206 0000022B 68 [00000000]                   	PUSH	LC0
   207 00000230 6A 50                           	PUSH	80
   208 00000232 68 000000A0                     	PUSH	160
   209 00000237 FF B5 FFFFFCA8                  	PUSH	DWORD [-856+EBP]
   210 0000023D E8 [00000000]                   	CALL	_make_window8
   211 00000242 83 C4 24                        	ADD	ESP,36
   212 00000245 6A 00                           	PUSH	0
   213 00000247 6A 00                           	PUSH	0
   214 00000249 FF B5 FFFFFCB8                  	PUSH	DWORD [-840+EBP]
   215 0000024F E8 [00000000]                   	CALL	_sheet_slide
   216 00000254 0F BF 05 00000FF4               	MOVSX	EAX,WORD [4084]
   217 0000025B 8D 48 F0                        	LEA	ECX,DWORD [-16+EAX]
   218 0000025E 89 C8                           	MOV	EAX,ECX
   219 00000260 99                              	CDQ
   220 00000261 F7 FB                           	IDIV	EBX
   221 00000263 89 85 FFFFFCC0                  	MOV	DWORD [-832+EBP],EAX
   222 00000269 0F BF 05 00000FF6               	MOVSX	EAX,WORD [4086]
   223 00000270 8D 48 D4                        	LEA	ECX,DWORD [-44+EAX]
   224 00000273 89 C8                           	MOV	EAX,ECX
   225 00000275 99                              	CDQ
   226 00000276 F7 FB                           	IDIV	EBX
   227 00000278 50                              	PUSH	EAX
   228 00000279 89 85 FFFFFCBC                  	MOV	DWORD [-836+EBP],EAX
   229 0000027F FF B5 FFFFFCC0                  	PUSH	DWORD [-832+EBP]
   230 00000285 FF B5 FFFFFCB4                  	PUSH	DWORD [-844+EBP]
   231 0000028B 8D 5D C4                        	LEA	EBX,DWORD [-60+EBP]
   232 0000028E E8 [00000000]                   	CALL	_sheet_slide
   233 00000293 6A 48                           	PUSH	72
   234 00000295 6A 50                           	PUSH	80
   235 00000297 FF B5 FFFFFCB0                  	PUSH	DWORD [-848+EBP]
   236 0000029D E8 [00000000]                   	CALL	_sheet_slide
   237 000002A2 83 C4 24                        	ADD	ESP,36
   238 000002A5 6A 00                           	PUSH	0
   239 000002A7 FF B5 FFFFFCB8                  	PUSH	DWORD [-840+EBP]
   240 000002AD E8 [00000000]                   	CALL	_sheet_updown
   241 000002B2 6A 01                           	PUSH	1
   242 000002B4 FF B5 FFFFFCB0                  	PUSH	DWORD [-848+EBP]
   243 000002BA E8 [00000000]                   	CALL	_sheet_updown
   244 000002BF 6A 02                           	PUSH	2
   245 000002C1 FF B5 FFFFFCB4                  	PUSH	DWORD [-844+EBP]
   246 000002C7 E8 [00000000]                   	CALL	_sheet_updown
   247 000002CC 68 [00000004]                   	PUSH	LC1
   248 000002D1 6A 02                           	PUSH	2
   249 000002D3 68 000000A8                     	PUSH	168
   250 000002D8 6A 6C                           	PUSH	108
   251 000002DA 0F BF 05 00000FF4               	MOVSX	EAX,WORD [4084]
   252 000002E1 50                              	PUSH	EAX
   253 000002E2 FF B5 FFFFFCB8                  	PUSH	DWORD [-840+EBP]
   254 000002E8 E8 [00000000]                   	CALL	_putfonts8_asc
   255 000002ED 83 C4 30                        	ADD	ESP,48
   256 000002F0 FF B5 FFFFFCBC                  	PUSH	DWORD [-836+EBP]
   257 000002F6 FF B5 FFFFFCC0                  	PUSH	DWORD [-832+EBP]
   258 000002FC 68 [00000015]                   	PUSH	LC2
   259 00000301 53                              	PUSH	EBX
   260 00000302 E8 [00000000]                   	CALL	_sprintf
   261 00000307 53                              	PUSH	EBX
   262 00000308 6A 01                           	PUSH	1
   263 0000030A 6A 64                           	PUSH	100
   264 0000030C 6A 10                           	PUSH	16
   265 0000030E 0F BF 05 00000FF4               	MOVSX	EAX,WORD [4084]
   266 00000315 50                              	PUSH	EAX
   267 00000316 FF B5 FFFFFCAC                  	PUSH	DWORD [-852+EBP]
   268 0000031C E8 [00000000]                   	CALL	_putfonts8_asc
   269 00000321 83 C4 28                        	ADD	ESP,40
   270 00000324 68 003C0000                     	PUSH	3932160
   271 00000329 E8 [00000000]                   	CALL	_memman_total
   272 0000032E C1 E8 0A                        	SHR	EAX,10
   273 00000331 89 04 24                        	MOV	DWORD [ESP],EAX
   274 00000334 56                              	PUSH	ESI
   275 00000335 68 [0000001D]                   	PUSH	LC3
   276 0000033A 53                              	PUSH	EBX
   277 0000033B E8 [00000000]                   	CALL	_sprintf
   278 00000340 53                              	PUSH	EBX
   279 00000341 6A 07                           	PUSH	7
   280 00000343 6A 40                           	PUSH	64
   281 00000345 6A 00                           	PUSH	0
   282 00000347 0F BF 05 00000FF4               	MOVSX	EAX,WORD [4084]
   283 0000034E 50                              	PUSH	EAX
   284 0000034F FF B5 FFFFFCAC                  	PUSH	DWORD [-852+EBP]
   285 00000355 E8 [00000000]                   	CALL	_putfonts8_asc
   286 0000035A 83 C4 28                        	ADD	ESP,40
   287 0000035D 0F BF 05 00000FF6               	MOVSX	EAX,WORD [4086]
   288 00000364 50                              	PUSH	EAX
   289 00000365 0F BF 05 00000FF4               	MOVSX	EAX,WORD [4084]
   290 0000036C 50                              	PUSH	EAX
   291 0000036D 6A 00                           	PUSH	0
   292 0000036F 6A 00                           	PUSH	0
   293 00000371 FF B5 FFFFFCB8                  	PUSH	DWORD [-840+EBP]
   294 00000377 E8 [00000000]                   	CALL	_sheet_refresh
   295 0000037C 8D 85 FFFFFE14                  	LEA	EAX,DWORD [-492+EBP]
   296 00000382 50                              	PUSH	EAX
   297 00000383 E8 [00000000]                   	CALL	_enable_mouse
   298 00000388 83 C4 18                        	ADD	ESP,24
   299 0000038B                                 L24:
   300 0000038B FF 35 [00000000]                	PUSH	DWORD [_timerctl]
   301 00000391 68 [00000036]                   	PUSH	LC4
   302 00000396 8D 5D C4                        	LEA	EBX,DWORD [-60+EBP]
   303 00000399 53                              	PUSH	EBX
   304 0000039A 8D BD FFFFFCF4                  	LEA	EDI,DWORD [-780+EBP]
   305 000003A0 8D B5 FFFFFCD4                  	LEA	ESI,DWORD [-812+EBP]
   306 000003A6 E8 [00000000]                   	CALL	_sprintf
   307 000003AB 6A 2B                           	PUSH	43
   308 000003AD 6A 77                           	PUSH	119
   309 000003AF 6A 1C                           	PUSH	28
   310 000003B1 6A 28                           	PUSH	40
   311 000003B3 6A 08                           	PUSH	8
   312 000003B5 68 000000A0                     	PUSH	160
   313 000003BA FF B5 FFFFFCA8                  	PUSH	DWORD [-856+EBP]
   314 000003C0 E8 [00000000]                   	CALL	_boxfill8
   315 000003C5 83 C4 28                        	ADD	ESP,40
   316 000003C8 53                              	PUSH	EBX
   317 000003C9 6A 03                           	PUSH	3
   318 000003CB 6A 1C                           	PUSH	28
   319 000003CD 6A 28                           	PUSH	40
   320 000003CF 68 000000A0                     	PUSH	160
   321 000003D4 FF B5 FFFFFCA8                  	PUSH	DWORD [-856+EBP]
   322 000003DA E8 [00000000]                   	CALL	_putfonts8_asc
   323 000003DF 6A 2C                           	PUSH	44
   324 000003E1 6A 78                           	PUSH	120
   325 000003E3 6A 1C                           	PUSH	28
   326 000003E5 6A 28                           	PUSH	40
   327 000003E7 FF B5 FFFFFCB0                  	PUSH	DWORD [-848+EBP]
   328 000003ED E8 [00000000]                   	CALL	_sheet_refresh
   329 000003F2 83 C4 2C                        	ADD	ESP,44
   330 000003F5 E8 [00000000]                   	CALL	_io_cli
   331 000003FA 68 [00000000]                   	PUSH	_keyfifo
   332 000003FF E8 [00000000]                   	CALL	_fifo8_status
   333 00000404 68 [00000000]                   	PUSH	_mousefifo
   334 00000409 89 C3                           	MOV	EBX,EAX
   335 0000040B E8 [00000000]                   	CALL	_fifo8_status
   336 00000410 57                              	PUSH	EDI
   337 00000411 01 C3                           	ADD	EBX,EAX
   338 00000413 E8 [00000000]                   	CALL	_fifo8_status
   339 00000418 56                              	PUSH	ESI
   340 00000419 01 C3                           	ADD	EBX,EAX
   341 0000041B E8 [00000000]                   	CALL	_fifo8_status
   342 00000420 83 C4 10                        	ADD	ESP,16
   343 00000423 8D 04 18                        	LEA	EAX,DWORD [EAX+EBX*1]
   344 00000426 85 C0                           	TEST	EAX,EAX
   345 00000428 0F 84 0000034A                  	JE	L26
   346 0000042E 68 [00000000]                   	PUSH	_keyfifo
   347 00000433 E8 [00000000]                   	CALL	_fifo8_status
   348 00000438 5A                              	POP	EDX
   349 00000439 85 C0                           	TEST	EAX,EAX
   350 0000043B 0F 85 000002BF                  	JNE	L27
   351 00000441 68 [00000000]                   	PUSH	_mousefifo
   352 00000446 E8 [00000000]                   	CALL	_fifo8_status
   353 0000044B 5B                              	POP	EBX
   354 0000044C 85 C0                           	TEST	EAX,EAX
   355 0000044E 0F 85 000000E4                  	JNE	L28
   356 00000454 57                              	PUSH	EDI
   357 00000455 E8 [00000000]                   	CALL	_fifo8_status
   358 0000045A 59                              	POP	ECX
   359 0000045B 85 C0                           	TEST	EAX,EAX
   360 0000045D 0F 85 00000091                  	JNE	L29
   361 00000463 56                              	PUSH	ESI
   362 00000464 E8 [00000000]                   	CALL	_fifo8_status
   363 00000469 5A                              	POP	EDX
   364 0000046A 85 C0                           	TEST	EAX,EAX
   365 0000046C 0F 84 FFFFFF19                  	JE	L24
   366 00000472 56                              	PUSH	ESI
   367 00000473 E8 [00000000]                   	CALL	_fifo8_get
   368 00000478 89 C3                           	MOV	EBX,EAX
   369 0000047A E8 [00000000]                   	CALL	_io_sti
   370 0000047F 58                              	POP	EAX
   371 00000480 85 DB                           	TEST	EBX,EBX
   372 00000482 74 56                           	JE	L22
   373 00000484 6A 00                           	PUSH	0
   374 00000486 56                              	PUSH	ESI
   375 00000487 FF B5 FFFFFCA4                  	PUSH	DWORD [-860+EBP]
   376 0000048D E8 [00000000]                   	CALL	_timer_init
   377 00000492 6A 6F                           	PUSH	111
   378 00000494 6A 0F                           	PUSH	15
   379 00000496 6A 60                           	PUSH	96
   380 00000498 6A 08                           	PUSH	8
   381 0000049A 6A 07                           	PUSH	7
   382 0000049C                                 L25:
   383 0000049C 0F BF 05 00000FF4               	MOVSX	EAX,WORD [4084]
   384 000004A3 50                              	PUSH	EAX
   385 000004A4 FF B5 FFFFFCAC                  	PUSH	DWORD [-852+EBP]
   386 000004AA E8 [00000000]                   	CALL	_boxfill8
   387 000004AF 83 C4 28                        	ADD	ESP,40
   388 000004B2 6A 32                           	PUSH	50
   389 000004B4 FF B5 FFFFFCA4                  	PUSH	DWORD [-860+EBP]
   390 000004BA E8 [00000000]                   	CALL	_timer_settime
   391 000004BF 6A 70                           	PUSH	112
   392 000004C1 6A 10                           	PUSH	16
   393 000004C3 6A 60                           	PUSH	96
   394 000004C5 6A 00                           	PUSH	0
   395 000004C7 FF B5 FFFFFCB8                  	PUSH	DWORD [-840+EBP]
   396 000004CD E8 [00000000]                   	CALL	_sheet_refresh
   397 000004D2 83 C4 1C                        	ADD	ESP,28
   398 000004D5 E9 FFFFFEB1                     	JMP	L24
   399 000004DA                                 L22:
   400 000004DA 6A 01                           	PUSH	1
   401 000004DC 56                              	PUSH	ESI
   402 000004DD FF B5 FFFFFCA4                  	PUSH	DWORD [-860+EBP]
   403 000004E3 E8 [00000000]                   	CALL	_timer_init
   404 000004E8 6A 6F                           	PUSH	111
   405 000004EA 6A 0F                           	PUSH	15
   406 000004EC 6A 60                           	PUSH	96
   407 000004EE 6A 08                           	PUSH	8
   408 000004F0 6A 0E                           	PUSH	14
   409 000004F2 EB A8                           	JMP	L25
   410 000004F4                                 L29:
   411 000004F4 57                              	PUSH	EDI
   412 000004F5 E8 [00000000]                   	CALL	_fifo8_get
   413 000004FA E8 [00000000]                   	CALL	_io_sti
   414 000004FF 68 [0000003C]                   	PUSH	LC8
   415 00000504 6A 07                           	PUSH	7
   416 00000506 6A 50                           	PUSH	80
   417 00000508 6A 00                           	PUSH	0
   418 0000050A 0F BF 05 00000FF4               	MOVSX	EAX,WORD [4084]
   419 00000511 50                              	PUSH	EAX
   420 00000512 FF B5 FFFFFCAC                  	PUSH	DWORD [-852+EBP]
   421 00000518 E8 [00000000]                   	CALL	_putfonts8_asc
   422 0000051D 6A 60                           	PUSH	96
   423 0000051F 6A 38                           	PUSH	56
   424 00000521 6A 50                           	PUSH	80
   425 00000523 6A 00                           	PUSH	0
   426 00000525 FF B5 FFFFFCB8                  	PUSH	DWORD [-840+EBP]
   427 0000052B E8 [00000000]                   	CALL	_sheet_refresh
   428 00000530 83 C4 30                        	ADD	ESP,48
   429 00000533 E9 FFFFFE53                     	JMP	L24
   430 00000538                                 L28:
   431 00000538 68 [00000000]                   	PUSH	_mousefifo
   432 0000053D E8 [00000000]                   	CALL	_fifo8_get
   433 00000542 89 C3                           	MOV	EBX,EAX
   434 00000544 E8 [00000000]                   	CALL	_io_sti
   435 00000549 0F B6 C3                        	MOVZX	EAX,BL
   436 0000054C 50                              	PUSH	EAX
   437 0000054D 8D 85 FFFFFE14                  	LEA	EAX,DWORD [-492+EBP]
   438 00000553 50                              	PUSH	EAX
   439 00000554 E8 [00000000]                   	CALL	_mouse_decode
   440 00000559 83 C4 0C                        	ADD	ESP,12
   441 0000055C 85 C0                           	TEST	EAX,EAX
   442 0000055E 0F 84 FFFFFE27                  	JE	L24
   443 00000564 FF B5 FFFFFE1C                  	PUSH	DWORD [-484+EBP]
   444 0000056A FF B5 FFFFFE18                  	PUSH	DWORD [-488+EBP]
   445 00000570 68 [00000044]                   	PUSH	LC6
   446 00000575 8D 45 C4                        	LEA	EAX,DWORD [-60+EBP]
   447 00000578 50                              	PUSH	EAX
   448 00000579 E8 [00000000]                   	CALL	_sprintf
   449 0000057E 83 C4 10                        	ADD	ESP,16
   450 00000581 8B 85 FFFFFE20                  	MOV	EAX,DWORD [-480+EBP]
   451 00000587 A9 00000001                     	TEST	EAX,1
   452 0000058C 74 04                           	JE	L11
   453 0000058E C6 45 C5 4C                     	MOV	BYTE [-59+EBP],76
   454 00000592                                 L11:
   455 00000592 A9 00000002                     	TEST	EAX,2
   456 00000597 74 04                           	JE	L12
   457 00000599 C6 45 C7 52                     	MOV	BYTE [-57+EBP],82
   458 0000059D                                 L12:
   459 0000059D 83 E0 04                        	AND	EAX,4
   460 000005A0 74 04                           	JE	L13
   461 000005A2 C6 45 C6 43                     	MOV	BYTE [-58+EBP],67
   462 000005A6                                 L13:
   463 000005A6 6A 2F                           	PUSH	47
   464 000005A8 68 00000097                     	PUSH	151
   465 000005AD 6A 20                           	PUSH	32
   466 000005AF 6A 20                           	PUSH	32
   467 000005B1 6A 0E                           	PUSH	14
   468 000005B3 0F BF 05 00000FF4               	MOVSX	EAX,WORD [4084]
   469 000005BA 50                              	PUSH	EAX
   470 000005BB FF B5 FFFFFCAC                  	PUSH	DWORD [-852+EBP]
   471 000005C1 E8 [00000000]                   	CALL	_boxfill8
   472 000005C6 8D 55 C4                        	LEA	EDX,DWORD [-60+EBP]
   473 000005C9 52                              	PUSH	EDX
   474 000005CA 6A 07                           	PUSH	7
   475 000005CC 6A 20                           	PUSH	32
   476 000005CE 6A 20                           	PUSH	32
   477 000005D0 0F BF 05 00000FF4               	MOVSX	EAX,WORD [4084]
   478 000005D7 50                              	PUSH	EAX
   479 000005D8 FF B5 FFFFFCAC                  	PUSH	DWORD [-852+EBP]
   480 000005DE E8 [00000000]                   	CALL	_putfonts8_asc
   481 000005E3 83 C4 34                        	ADD	ESP,52
   482 000005E6 6A 30                           	PUSH	48
   483 000005E8 68 00000098                     	PUSH	152
   484 000005ED 6A 20                           	PUSH	32
   485 000005EF 6A 20                           	PUSH	32
   486 000005F1 FF B5 FFFFFCB8                  	PUSH	DWORD [-840+EBP]
   487 000005F7 E8 [00000000]                   	CALL	_sheet_refresh
   488 000005FC 8B 85 FFFFFE18                  	MOV	EAX,DWORD [-488+EBP]
   489 00000602 8B 9D FFFFFE1C                  	MOV	EBX,DWORD [-484+EBP]
   490 00000608 83 C4 14                        	ADD	ESP,20
   491 0000060B 01 9D FFFFFCBC                  	ADD	DWORD [-836+EBP],EBX
   492 00000611 01 85 FFFFFCC0                  	ADD	DWORD [-832+EBP],EAX
   493 00000617 0F 88 000000D4                  	JS	L30
   494 0000061D                                 L14:
   495 0000061D 83 BD FFFFFCBC 00               	CMP	DWORD [-836+EBP],0
   496 00000624 0F 88 000000B8                  	JS	L31
   497 0000062A                                 L15:
   498 0000062A 0F BF 05 00000FF4               	MOVSX	EAX,WORD [4084]
   499 00000631 48                              	DEC	EAX
   500 00000632 39 85 FFFFFCC0                  	CMP	DWORD [-832+EBP],EAX
   501 00000638 7E 06                           	JLE	L16
   502 0000063A 89 85 FFFFFCC0                  	MOV	DWORD [-832+EBP],EAX
   503 00000640                                 L16:
   504 00000640 0F BF 05 00000FF6               	MOVSX	EAX,WORD [4086]
   505 00000647 48                              	DEC	EAX
   506 00000648 39 85 FFFFFCBC                  	CMP	DWORD [-836+EBP],EAX
   507 0000064E 7E 06                           	JLE	L17
   508 00000650 89 85 FFFFFCBC                  	MOV	DWORD [-836+EBP],EAX
   509 00000656                                 L17:
   510 00000656 FF B5 FFFFFCBC                  	PUSH	DWORD [-836+EBP]
   511 0000065C FF B5 FFFFFCC0                  	PUSH	DWORD [-832+EBP]
   512 00000662 68 [00000052]                   	PUSH	LC7
   513 00000667 8D 55 C4                        	LEA	EDX,DWORD [-60+EBP]
   514 0000066A 52                              	PUSH	EDX
   515 0000066B 8D 5D C4                        	LEA	EBX,DWORD [-60+EBP]
   516 0000066E E8 [00000000]                   	CALL	_sprintf
   517 00000673 6A 0F                           	PUSH	15
   518 00000675 6A 4F                           	PUSH	79
   519 00000677 6A 00                           	PUSH	0
   520 00000679 6A 00                           	PUSH	0
   521 0000067B 6A 0E                           	PUSH	14
   522 0000067D 0F BF 05 00000FF4               	MOVSX	EAX,WORD [4084]
   523 00000684 50                              	PUSH	EAX
   524 00000685 FF B5 FFFFFCAC                  	PUSH	DWORD [-852+EBP]
   525 0000068B E8 [00000000]                   	CALL	_boxfill8
   526 00000690 83 C4 2C                        	ADD	ESP,44
   527 00000693 53                              	PUSH	EBX
   528 00000694 6A 07                           	PUSH	7
   529 00000696 6A 00                           	PUSH	0
   530 00000698 6A 00                           	PUSH	0
   531 0000069A 0F BF 05 00000FF4               	MOVSX	EAX,WORD [4084]
   532 000006A1 50                              	PUSH	EAX
   533 000006A2 FF B5 FFFFFCAC                  	PUSH	DWORD [-852+EBP]
   534 000006A8 E8 [00000000]                   	CALL	_putfonts8_asc
   535 000006AD 6A 10                           	PUSH	16
   536 000006AF 6A 50                           	PUSH	80
   537 000006B1 6A 00                           	PUSH	0
   538 000006B3 6A 00                           	PUSH	0
   539 000006B5 FF B5 FFFFFCB8                  	PUSH	DWORD [-840+EBP]
   540 000006BB E8 [00000000]                   	CALL	_sheet_refresh
   541 000006C0 83 C4 2C                        	ADD	ESP,44
   542 000006C3 FF B5 FFFFFCBC                  	PUSH	DWORD [-836+EBP]
   543 000006C9 FF B5 FFFFFCC0                  	PUSH	DWORD [-832+EBP]
   544 000006CF FF B5 FFFFFCB4                  	PUSH	DWORD [-844+EBP]
   545 000006D5 E8 [00000000]                   	CALL	_sheet_slide
   546 000006DA 83 C4 0C                        	ADD	ESP,12
   547 000006DD E9 FFFFFCA9                     	JMP	L24
   548 000006E2                                 L31:
   549 000006E2 C7 85 FFFFFCBC 00000000         	MOV	DWORD [-836+EBP],0
   550 000006EC E9 FFFFFF39                     	JMP	L15
   551 000006F1                                 L30:
   552 000006F1 C7 85 FFFFFCC0 00000000         	MOV	DWORD [-832+EBP],0
   553 000006FB E9 FFFFFF1D                     	JMP	L14
   554 00000700                                 L27:
   555 00000700 68 [00000000]                   	PUSH	_keyfifo
   556 00000705 E8 [00000000]                   	CALL	_fifo8_get
   557 0000070A 89 C3                           	MOV	EBX,EAX
   558 0000070C E8 [00000000]                   	CALL	_io_sti
   559 00000711 53                              	PUSH	EBX
   560 00000712 8D 55 C4                        	LEA	EDX,DWORD [-60+EBP]
   561 00000715 68 [0000005D]                   	PUSH	LC5
   562 0000071A 8D 5D C4                        	LEA	EBX,DWORD [-60+EBP]
   563 0000071D 52                              	PUSH	EDX
   564 0000071E E8 [00000000]                   	CALL	_sprintf
   565 00000723 6A 2F                           	PUSH	47
   566 00000725 6A 0F                           	PUSH	15
   567 00000727 6A 20                           	PUSH	32
   568 00000729 6A 00                           	PUSH	0
   569 0000072B 6A 0E                           	PUSH	14
   570 0000072D 0F BF 05 00000FF4               	MOVSX	EAX,WORD [4084]
   571 00000734 50                              	PUSH	EAX
   572 00000735 FF B5 FFFFFCAC                  	PUSH	DWORD [-852+EBP]
   573 0000073B E8 [00000000]                   	CALL	_boxfill8
   574 00000740 83 C4 2C                        	ADD	ESP,44
   575 00000743 53                              	PUSH	EBX
   576 00000744 6A 07                           	PUSH	7
   577 00000746 6A 20                           	PUSH	32
   578 00000748 6A 00                           	PUSH	0
   579 0000074A 0F BF 05 00000FF4               	MOVSX	EAX,WORD [4084]
   580 00000751 50                              	PUSH	EAX
   581 00000752 FF B5 FFFFFCAC                  	PUSH	DWORD [-852+EBP]
   582 00000758 E8 [00000000]                   	CALL	_putfonts8_asc
   583 0000075D 6A 30                           	PUSH	48
   584 0000075F 6A 10                           	PUSH	16
   585 00000761 6A 20                           	PUSH	32
   586 00000763 6A 00                           	PUSH	0
   587 00000765 FF B5 FFFFFCB8                  	PUSH	DWORD [-840+EBP]
   588 0000076B E8 [00000000]                   	CALL	_sheet_refresh
   589 00000770 83 C4 2C                        	ADD	ESP,44
   590 00000773 E9 FFFFFC13                     	JMP	L24
   591 00000778                                 L26:
   592 00000778 E8 [00000000]                   	CALL	_io_stihlt
   593 0000077D E9 FFFFFC09                     	JMP	L24
